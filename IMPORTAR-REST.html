<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Importar con REST API - EFIL 2025</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            text-align: center;
        }

        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 20px 40px;
            font-size: 20px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
        }

        #status {
            margin-top: 20px;
            padding: 15px;
            border-radius: 5px;
            font-size: 16px;
        }

        .success {
            background: #d4edda;
            color: #155724;
        }

        .error {
            background: #f8d7da;
            color: #721c24;
        }
    </style>
</head>

<body>
    <h1>üöÄ Importar con REST API</h1>
    <p>√öltima prueba con Firebase usando API REST</p>
    <button onclick="importar()">IMPORTAR DATOS</button>
    <div id="status"></div>

    <script>
        async function importar() {
            const btn = event.target;
            const status = document.getElementById('status');
            btn.disabled = true;
            btn.textContent = 'Importando...';
            status.textContent = '‚è≥ Subiendo...';

            const data = { "matches": { "1": { "team1": "E.F.I.L.", "team2": "URIBE (VERDE)", "group": "A", "date": "2024-12-05", "time": "16:00", "score1": null, "score2": null }, "2": { "team1": "URIBE (AMARILLO)", "team2": "MOSTRANDO CAMINOS", "group": "E", "date": "2024-12-05", "time": "17:00", "score1": null, "score2": null }, "3": { "team1": "MADRESELVA", "team2": "PLAZA ESPA√ëA (25 DE MAYO)", "group": "D", "date": "2024-12-05", "time": "18:05", "score1": null, "score2": null }, "4": { "team1": "RIVADAVIA", "team2": "ROQUE P√âREZ", "group": "F", "date": "2024-12-05", "time": "19:10", "score1": null, "score2": null }, "5": { "team1": "E.F.I.N. (NAVARRO)", "team2": "LA BLANQUITA (MERLO)", "group": "B", "date": "2024-12-05", "time": "20:20", "score1": null, "score2": null }, "6": { "team1": "SAN MART√çN NEGRO (MONTE GRANDE)", "team2": "EL PORVENIR (MERLO)", "group": "A", "date": "2024-12-05", "time": "21:30", "score1": null, "score2": null }, "7": { "team1": "SALGADO", "team2": "PROVINCIAL", "group": "B", "date": "2024-12-05", "time": "22:40", "score1": null, "score2": null }, "8": { "team1": "C.F.C. (BLANCO)", "team2": "LA BLANQUITA (MERLO)", "group": "C", "date": "2024-12-06", "time": "16:50", "score1": null, "score2": null }, "9": { "team1": "E.F.I.L.", "team2": "EL PORVENIR (MERLO)", "group": "A", "date": "2024-12-06", "time": "18:00", "score1": null, "score2": null }, "10": { "team1": "MADRESELVA", "team2": "DORREGO", "group": "D", "date": "2024-12-06", "time": "19:10", "score1": null, "score2": null }, "11": { "team1": "CA√ëUELA F.C. (ROJO)", "team2": "FERRO (LAS FLORES)", "group": "E", "date": "2024-12-06", "time": "20:20", "score1": null, "score2": null }, "12": { "team1": "TRIST√ÅN SU√ÅREZ", "team2": "REAL STFC RC", "group": "F", "date": "2024-12-06", "time": "21:30", "score1": null, "score2": null }, "13": { "team1": "URIBE (AMARILLO)", "team2": "CA√ëUELAS F.C. (ROJO)", "group": "E", "date": "2024-12-07", "time": "12:40", "score1": null, "score2": null }, "14": { "team1": "SAN MARTIN (MONTE GRANDE)", "team2": "URIBE (VERDE)", "group": "A", "date": "2024-12-07", "time": "13:50", "score1": null, "score2": null }, "15": { "team1": "MOSTRANDO CAMINOS", "team2": "FERRO (LAS FLORES)", "group": "E", "date": "2024-12-07", "time": "15:00", "score1": null, "score2": null }, "16": { "team1": "RIVADAVIA", "team2": "TRIST√ÅN SU√ÅREZ", "group": "F", "date": "2024-12-07", "time": "16:10", "score1": null, "score2": null }, "17": { "team1": "ROQUE P√âREZ", "team2": "REAL STFC RC", "group": "F", "date": "2024-12-07", "time": "17:20", "score1": null, "score2": null }, "18": { "team1": "ATHLETIC", "team2": "CA√ëUELAS F.C. (BLANCO)", "group": "C", "date": "2024-12-07", "time": "18:30", "score1": null, "score2": null }, "19": { "team1": "DORREGO", "team2": "BANFIELD", "group": "D", "date": "2024-12-07", "time": "19:40", "score1": null, "score2": null }, "20": { "team1": "PROVINCIAL", "team2": "DEFENSA Y JUSTICIA", "group": "B", "date": "2024-12-07", "time": "22:30", "score1": null, "score2": null }, "21": { "team1": "URIBE (VERDE)", "team2": "EL PORVENIR (MERLO)", "group": "A", "date": "2024-12-08", "time": "14:30", "score1": null, "score2": null }, "22": { "team1": "ATHLETIC", "team2": "LA BLANQUITA (MERLO)", "group": "C", "date": "2024-12-08", "time": "15:40", "score1": null, "score2": null }, "23": { "team1": "ROQUE P√âREZ", "team2": "TRIST√ÅN SU√ÅREZ", "group": "F", "date": "2024-12-08", "time": "16:50", "score1": null, "score2": null }, "24": { "team1": "SALGADO", "team2": "DEFENSA Y JUSTICIA", "group": "B", "date": "2024-12-08", "time": "18:00", "score1": null, "score2": null }, "25": { "team1": "E.F.I.N. (NAVARRO)", "team2": "CA√ëUELAS F.C. (BLANCO)", "group": "C", "date": "2024-12-08", "time": "19:10", "score1": null, "score2": null }, "26": { "team1": "RIVADAVIA", "team2": "REAL STFC", "group": "F", "date": "2024-12-08", "time": "20:20", "score1": null, "score2": null }, "27": { "team1": "MADRESELVA", "team2": "BANFIELD", "group": "D", "date": "2024-12-08", "time": "21:30", "score1": null, "score2": null }, "28": { "team1": "URIBE (AMARILLO)", "team2": "FERRO (LAS FLORES)", "group": "E", "date": "2024-12-09", "time": "14:00", "score1": null, "score2": null }, "29": { "team1": "MOSTRANDO CAMINOS", "team2": "CA√ëUELAS F.C. (ROJO)", "group": "E", "date": "2024-12-09", "time": "15:10", "score1": null, "score2": null }, "30": { "team1": "BANFIELD", "team2": "PLAZA ESPA√ëA (25 DE MAYO)", "group": "D", "date": "2024-12-09", "time": "17:20", "score1": null, "score2": null }, "31": { "team1": "HURAC√ÅN (SALADILLO)", "team2": "DEFENSA Y JUSTICIA", "group": "B", "date": "2024-12-09", "time": "18:25", "score1": null, "score2": null }, "32": { "team1": "DORREGO", "team2": "PLAZA ESPA√ëA (25 DE MAYO)", "group": "D", "date": "2024-12-09", "time": "19:30", "score1": null, "score2": null }, "33": { "team1": "SALGADO", "team2": "HURAC√ÅN (SALADILLO)", "group": "B", "date": "2024-12-09", "time": "20:40", "score1": null, "score2": null }, "34": { "team1": "E.F.I.L.", "team2": "SAN MART√çN (MONTE GRANDE) NEGRO", "group": "A", "date": "2024-12-09", "time": "21:50", "score1": null, "score2": null }, "35": { "team1": "ATHLETIC", "team2": "E.F.I.N. (NAVARRO)", "group": "C", "date": "2024-12-09", "time": "23:00", "score1": null, "score2": null }, "36": { "team1": "PROVINCIAL", "team2": "HURAC√ÅN (SALADILLO)", "group": "B", "date": "2024-12-10", "time": "13:10", "score1": null, "score2": null } }, "teams": {}, "groups": {}, "config": { "tournamentName": "Torneo Nacional EFIL 2025", "adminPass": "efil2025" }, "alerts": {} };

            try {
                const response = await fetch(
                    'https://firestore.googleapis.com/v1/projects/torneo-efil-2025/databases/(default)/documents/efil_data/efil_data',
                    {
                        method: 'PATCH',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ fields: convertToFirestoreFormat(data) })
                    }
                );

                if (response.ok) {
                    status.className = 'success';
                    status.textContent = '‚úÖ ¬°LISTO! Datos importados correctamente.';
                    btn.textContent = '‚úÖ Completado';
                } else {
                    throw new Error(await response.text());
                }
            } catch (error) {
                status.className = 'error';
                status.textContent = '‚ùå Error: ' + error.message;
                btn.disabled = false;
                btn.textContent = 'Reintentar';
            }
        }

        function convertToFirestoreFormat(obj) {
            if (obj === null) return { nullValue: null };
            if (typeof obj === 'string') return { stringValue: obj };
            if (typeof obj === 'number') return { integerValue: obj };
            if (typeof obj === 'boolean') return { booleanValue: obj };
            if (Array.isArray(obj)) return { arrayValue: { values: obj.map(convertToFirestoreFormat) } };
            if (typeof obj === 'object') {
                const fields = {};
                for (const [key, value] of Object.entries(obj)) {
                    fields[key] = convertToFirestoreFormat(value);
                }
                return { mapValue: { fields } };
            }
            return { stringValue: String(obj) };
        }
    </script>
</body>

</html>