<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Test Firebase</title>
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getFirestore, collection, addDoc } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

        const firebaseConfig = {
            apiKey: "AIzaSyDEqSXwobd7kKlJVMYi9aSAxKEBnFOLdQo",
            authDomain: "torneo-efil-2025.firebaseapp.com",
            projectId: "torneo-efil-2025",
            storageBucket: "torneo-efil-2025.firebasestorage.app",
            messagingSenderId: "1027732633033",
            appId: "1:1027732633033:web:f5e5e6a1c8f9e0b1c2d3e4"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        async function testConnection() {
            const output = document.getElementById('output');
            output.innerHTML = '<p>Probando conexión a Firebase...</p>';
            
            try {
                // Try to add one simple document
                const testDoc = await addDoc(collection(db, 'teams'), {
                    name: "Test Team",
                    group: "A",
                    played: 0,
                    won: 0,
                    drawn: 0,
                    lost: 0,
                    goalsFor: 0,
                    goalsAgainst: 0,
                    points: 0
                });
                
                output.innerHTML += '<p style="color: green;">? Conexión exitosa! ID: ' + testDoc.id + '</p>';
                output.innerHTML += '<p>Firebase está funcionando correctamente.</p>';
                output.innerHTML += '<p><strong>Ahora puedes usar el otro script para cargar todos los datos.</strong></p>';
            } catch (error) {
                output.innerHTML += '<p style="color: red;">? Error: ' + error.message + '</p>';
                output.innerHTML += '<p>Código de error: ' + error.code + '</p>';
                console.error('Error completo:', error);
            }
        }

        window.addEventListener('load', () => {
            document.getElementById('testBtn').addEventListener('click', testConnection);
        });
    </script>
    <style>
        body { font-family: Arial; max-width: 600px; margin: 50px auto; padding: 20px; }
        button { background: #2196F3; color: white; padding: 15px 30px; font-size: 18px; border: none; border-radius: 5px; cursor: pointer; }
        button:hover { background: #1976D2; }
        #output { margin-top: 20px; background: #f5f5f5; padding: 20px; border-radius: 5px; }
    </style>
</head>
<body>
    <h1>Test de Conexión Firebase</h1>
    <p>Este script probará si Firebase está funcionando correctamente.</p>
    <button id="testBtn">PROBAR CONEXIÓN</button>
    <div id="output"></div>
</body>
</html>
